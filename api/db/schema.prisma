datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = "native"
}

// Define your own datamodels here and run yarn redwood prisma migrate dev
// to create migrations for them and apply to your dev DB.
// TODO: Please remove the following example:
//model UserExample {
//  id    Int     @id @default(autoincrement())
//  email String  @unique
//  name  String?
//}

// What about days off?
model Worker {
  id               Int               @id @default(autoincrement())
  firstName        String
  lastName         String
  phone            String?
  email            String?
  addressId        Int?              @unique
  address          Address?          @relation(fields: [addressId], references: [id])
  jobType          String? //think about making flexible
  employmentStatus String            @default("active") //change to bool, int maybe later
  shifts           ShiftAssignment[]
}

model Worksite {
  id        Int        @id @default(autoincrement())
  name      String
  locations Location[]
}

model Location {
  id         Int      @id @default(autoincrement())
  name       String
  shifts     Shift[]
  worksiteId Int
  worksite   Worksite @relation(fields: [worksiteId], references: [id])
}

model Shift {
  id         Int               @id @default(autoincrement())
  name       String
  locationId Int
  location   Location          @relation(fields: [locationId], references: [id])
  workers    ShiftAssignment[]
}

model ShiftAssignment {
  id       Int    @id @default(autoincrement())
  workerId Int
  worker   Worker @relation(fields: [workerId], references: [id])
  shiftId  Int
  shift    Shift  @relation(fields: [shiftId], references: [id])

  @@unique([workerId, shiftId])
}

model Address {
  id         Int     @id @default(autoincrement())
  firstLine  String
  secondLine String?
  city       String
  state      String
  postal     String
  worker     Worker? //future problemo? maybe share address with something else
}
